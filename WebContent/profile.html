<!DOCTYPE html>
<html data-ng-app="">
<head>
  <title>Hipster!- A social network so exclusive it's like you're talking to yourself</title>
  <meta charset="utf-8">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="angular.min.js"></script>
  <script type="text/javascript" src="app.js"></script>
  <link rel="stylesheet" href = "http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href = "resources/css/main.css">
  <link rel="stylesheet" type="text/css" href = "resources/css/profile.css">
  <script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  
<script>
	function func() {
		var json= [{"DESCRIPTION":"long, duck, dong.","STALKERS":"0","POPULARITY":"1.0","USERNAME":"user","NICKNAME":"nick","PIC":"http://38.media.tumblr.com/avatar_65a3dde32c04_128.png","USER_ID":"4"},
		            {"OWNER":"100","MID":"1","STAMP":"2015-02-17 15:18:02.486","REPLYTO":"0","TIMES_REPUBLISHED":"0","POPULARITY":"42.0","REPUBLISH_OF":"0","TEXT":"this is test i dont know what an href @doesnt_exist @exists #stuff"},{"reply":""},{"mention":"@exists"}];
		var username= document.getElementsByClassName('username');
		var avatar= document.getElementsByClassName('avatar');
		var timestamp= document.getElementsByClassName('timestamp');
		var textcontent= document.getElementsByClassName('textcontent');
		
		
	    //document.getElementById('avatar').src = json[0].PIC;
	    //document.getElementById("username").innerHTML = "  @"+ json[0].USERNAME;
	    document.getElementById("nickname").innerHTML = json[0].NICKNAME;
	    document.getElementById("description").innerHTML = "<b>About Me:</b><br>" + json[0].DESCRIPTION;
	    document.getElementById("followers").innerHTML = json[0].STALKERS;
	    document.getElementById("rank").innerHTML = "Hipster Rank: #" +json[0].USER_ID;
	    document.getElementById("followersurl").href = "/users/"+ json[0].USERNAME+"/followers";
	    document.getElementById("followingurl").href = "/users/"+ json[0].USERNAME+"/following";
	    
	    
	    
	    for(i = 0; i < username.length; i++) {
	        username[i].innerHTML= "@" + json[0].USERNAME+" ";
	    }
	    
	    for(i = 0; i < avatar.length; i++) {
	        avatar[i].src= json[0].PIC;
	    }
	    
	    for(i = 0; i < timestamp.length; i++) {
	    	timestamp[i].innerHTML= timeago(json[1].STAMP);
	    }
	    for(i = 0; i < textcontent.length; i++) {
	    	textcontent[i].innerHTML= json[1].TEXT;
	    }
	    
	    
	    var parent= document.getElementById('messagebar');
	       
		for(var i = 0; i < json.length-1; i++) {
			var div = document.getElementById('usermessages'),
			clone = div.cloneNode(true);
			clone.id = "usermessages"+i;
			parent.appendChild(clone);     
		   }
	    
	}
	
	function timeago(stamp) {
		var now=new Date(stamp.replace(' ','T')+'Z');
		
	    var secs = (((new Date()).getTime() / 1000) - now.getTime()/1000);
	    Math.floor(secs);
	    var minutes = secs / 60;
	    secs = Math.floor(secs % 60);
	    if (minutes < 1) {
	        return secs + (secs > 1 ? ' seconds ago' : ' second ago');
	    }
	    var hours = minutes / 60;
	    minutes = Math.floor(minutes % 60);
	    if (hours < 1) {
	        return minutes + (minutes > 1 ? ' minutes ago' : ' minute ago');
	    }
	    var days = hours / 24;
	    hours = Math.floor(hours % 24);
	    if (days < 1) {
	        return hours + (hours > 1 ? ' hours ago' : ' hour ago');
	    }
	    return stamp.substring(0, stamp.length - 7);;

	}

</script>
</head>

<body onload="func();">

<div class="container">

		<div class="row">	
			<div class="col-sm-4">
				
				<div class="panel" id="details">
					<h1 class="nickname" id="nickname">Nickname</h1><h1 class="username"> @username </h1>
					<br>
					<h3 id=rank></h3>
					<br><br>
					
				    <img class="avatar" id="mainavatar" src="resources/images/defaultuserimg2.png">
					
				        <p>
				        	<br>
				            With <span id="followers">100</span><a href="" id="followersurl">  Followers </a>,   
				            <br>
				            <a href="" id="followingurl">Following </a><span id="following">100</span> other Hipsters.
				            <br><br>
				            
				            <span id="description"></span>
				            
				        </p>
				</div>
			</div>

			<div class="col-sm-8 " id="messagebar">
			<br><br>
			<h1> Previous Posts:</h1>
			
			<div class="usermessages" id="usermessages">
			  
			  <img class="avatar" src="resources/images/defaultuserimg2.png" align="bottom">
			  <h3 class="username"></h3><h3>wrote:</h3>
			  <br><br>
			  <div class="textcontent">
			    Panel content
			  </div>
			  <br>
			  <a href="replyservelet" class="reply">Reply</a>
			  <a href="republishservelet" class="rebuplish">Republish</a>
			  <span class="timestamp">date/time</span>
			  
			</div>
		
			</div>	
		</div>
</div>


</body>
</html>